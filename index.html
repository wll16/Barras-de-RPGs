<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Barra de Status com Login e Registro</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
    }
    .login-register-container, .hud-container {
      display: none;
    }
    .bar {
      width: 100%;
      background-color: #ddd;
      margin: 10px 0;
      position: relative;
      height: 30px;
      border-radius: 5px;
    }
    .bar-fill {
      height: 100%;
      background-color: #4caf50;
      text-align: center;
      color: white;
      line-height: 30px;
      border-radius: 5px;
    }
    .bar-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
      margin-top: 10px;
    }
    .bar-buttons button {
      padding: 5px 10px;
      font-size: 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .bar-buttons button:hover {
      background-color: #0056b3;
    }
    .bar-name {
      flex-grow: 1;
      margin-right: 10px;
      font-size: 14px;
      border: none;
      background: none;
      text-align: left;
      color: #333;
    }
    .login-register-container, .hud-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }
    input, button {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <!-- Login/Registro -->
  <div class="login-register-container" id="login-register-container">
    <div class="login-form">
      <h2>Login</h2>
      <input type="text" id="login-username" placeholder="Usuário" />
      <input type="password" id="login-password" placeholder="Senha" />
      <button id="login-button">Login</button>
      <p>Não tem conta? <a href="#" id="go-to-register">Registrar</a></p>
    </div>
    <div class="register-form" style="display:none;">
      <h2>Registrar</h2>
      <input type="text" id="register-username" placeholder="Nome de usuário" />
      <input type="password" id="register-password" placeholder="Senha" />
      <button id="register-button">Registrar</button>
      <p>Já tem conta? <a href="#" id="go-to-login">Fazer Login</a></p>
    </div>
  </div>

  <!-- HUD -->
  <div class="hud-container" id="hud-container">
    <h2>Bem-vindo, <span id="user-name"></span></h2>
    <div id="bars-container"></div>
    <button id="add-bar">Adicionar Barra</button>
  </div>

  <script>
    const loginForm = document.querySelector('.login-form');
    const registerForm = document.querySelector('.register-form');
    const loginRegisterContainer = document.getElementById('login-register-container');
    const hudContainer = document.getElementById('hud-container');
    const userNameSpan = document.getElementById('user-name');
    const barsContainer = document.getElementById('bars-container');
    const addBarButton = document.getElementById('add-bar');

    const savedUser = localStorage.getItem('user');
    if (savedUser) {
      showHUD(JSON.parse(savedUser));
    } else {
      loginRegisterContainer.style.display = 'flex';
    }

    document.getElementById('login-button').addEventListener('click', login);
    document.getElementById('register-button').addEventListener('click', register);
    document.getElementById('go-to-register').addEventListener('click', showRegisterForm);
    document.getElementById('go-to-login').addEventListener('click', showLoginForm);
    addBarButton.addEventListener('click', createBar);

    function showRegisterForm(event) {
      event.preventDefault();
      loginForm.style.display = 'none';
      registerForm.style.display = 'block';
    }

    function showLoginForm(event) {
      event.preventDefault();
      registerForm.style.display = 'none';
      loginForm.style.display = 'block';
    }

    function login() {
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;

      const user = {
        username,
        password
      };

      localStorage.setItem('user', JSON.stringify(user));
      showHUD(user);
    }

    function register() {
      const username = document.getElementById('register-username').value;
      const password = document.getElementById('register-password').value;

      const user = {
        username,
        password
      };

      localStorage.setItem('user', JSON.stringify(user));
      showHUD(user);
    }

    function showHUD(user) {
      loginRegisterContainer.style.display = 'none';
      hudContainer.style.display = 'block';
      userNameSpan.innerText = user.username;
    }

    function createBar() {
      const barName = prompt('Digite o nome da barra:');
      const maxValue = parseInt(prompt('Digite o valor máximo da barra:')) || 100;
      const initialValue = parseInt(prompt('Digite o valor inicial da barra:')) || 0;

      const bar = document.createElement('div');
      bar.classList.add('bar');
      bar.dataset.max = maxValue;
      bar.dataset.current = initialValue;

      const fill = document.createElement('div');
      fill.classList.add('bar-fill');
      fill.style.width = `${(initialValue / maxValue) * 100}%`;
      fill.innerText = `${initialValue}/${maxValue}`;
      bar.appendChild(fill);

      const buttons = document.createElement('div');
      buttons.classList.add('bar-buttons');

      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.classList.add('bar-name');
      nameInput.value = barName;
      nameInput.addEventListener('input', updateBarName);

      const increaseButton = document.createElement('button');
      increaseButton.textContent = '+';
      increaseButton.addEventListener('click', () => adjustBar(increaseButton, 1));

      const decreaseButton = document.createElement('button');
      decreaseButton.textContent = '-';
      decreaseButton.addEventListener('click', () => adjustBar(decreaseButton, -1));

      const removeButton = document.createElement('button');
      removeButton.textContent = 'Remover';
      removeButton.addEventListener('click', () => removeBar(removeButton));

      buttons.appendChild(nameInput);
      buttons.appendChild(increaseButton);
      buttons.appendChild(decreaseButton);
      buttons.appendChild(removeButton);

      bar.appendChild(buttons);
      barsContainer.appendChild(bar);
    }

    function adjustBar(button, amount) {
      const bar = button.closest('.bar');
      let current = parseInt(bar.dataset.current);
      const max = parseInt(bar.dataset.max);

      // Permitindo pontos temporários (passando do máximo)
      const newValue = current + amount;

      bar.dataset.current = newValue;
      bar.querySelector('.bar-fill').style.width = `${(newValue / max) * 100}%`;
      bar.querySelector('.bar-fill').innerText = `${newValue} / ${max} (temporário)`;
    }

    function updateBarName(event) {
      const bar = event.target.closest('.bar');
      const newName = event.target.value;
      // Atualizar o nome da barra no localStorage ou em outro lugar se necessário
    }

    function removeBar(button) {
      const bar = button.closest('.bar');
      bar.remove();
    }
  </script>
</body>
</html>
